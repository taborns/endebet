jQuery(document).ready(function($){"use strict";if("undefined"!=typeof HOMEY_ajax_vars){var ajaxurl=HOMEY_ajax_vars.admin_url+"admin-ajax.php",is_singular_listing=HOMEY_ajax_vars.is_singular_listing,paypal_connecting=HOMEY_ajax_vars.paypal_connecting,login_sending=HOMEY_ajax_vars.login_loading,process_loader_spinner=HOMEY_ajax_vars.process_loader_spinner,currency_updating_msg=HOMEY_ajax_vars.currency_updating_msg,userID=HOMEY_ajax_vars.user_id,homey_reCaptcha=HOMEY_ajax_vars.homey_reCaptcha,is_tansparent=HOMEY_ajax_vars.homey_tansparent,retina_logo=HOMEY_ajax_vars.retina_logo,retina_logo_splash=HOMEY_ajax_vars.retina_logo_splash,retina_logo_mobile=HOMEY_ajax_vars.retina_logo_mobile,retina_logo_mobile_splash=HOMEY_ajax_vars.retina_logo_mobile_splash,no_more_listings=HOMEY_ajax_vars.no_more_listings,allow_additional_guests=HOMEY_ajax_vars.allow_additional_guests,allowed_guests_num=HOMEY_ajax_vars.allowed_guests_num,agree_term_text=HOMEY_ajax_vars.agree_term_text,choose_gateway_text=HOMEY_ajax_vars.choose_gateway_text,success_icon=HOMEY_ajax_vars.success_icon,calendar_link=HOMEY_ajax_vars.calendar_link,focusedInput_2=null,compare_url=HOMEY_ajax_vars.compare_url,add_compare=HOMEY_ajax_vars.add_compare,remove_compare=HOMEY_ajax_vars.remove_compare,compare_limit=HOMEY_ajax_vars.compare_limit,homey_timeStamp_2=function(e){return new Date(e.replace(/^(\d{2}\-)(\d{2}\-)(\d{4})$/,"$2$1$3")).getTime()};2==window.devicePixelRatio&&(is_tansparent?(""!=retina_logo_splash&&$(".transparent-header .homey_logo img").attr("src",retina_logo_splash),""!=retina_logo_mobile_splash&&$(".mobile-logo img").attr("src",retina_logo_mobile_splash)):(""!=retina_logo&&$(".homey_logo img").attr("src",retina_logo),""!=retina_logo_mobile&&$(".mobile-logo img").attr("src",retina_logo_mobile)));var currencySwitcherList=$("#homey-currency-switcher-list");0<currencySwitcherList.length&&$("#homey-currency-switcher-list > li").on("click",function(e){e.stopPropagation(),currencySwitcherList.slideUp(200);var selectedCurrencyCode=$(this).data("currency-code");selectedCurrencyCode&&($(".homey-selected-currency span").html(selectedCurrencyCode),homey_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"homey_currency_converter",currency_to_converter:selectedCurrencyCode},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}}))});var listings_module_section=$("#listings_module_section");0<listings_module_section.length&&$("body").on("click",".homey-loadmore a",function(e){e.preventDefault();var $this=$(this),$wrap=$this.closest("#listings_module_section").find("#module_listings"),limit=$this.data("limit"),paged=$this.data("paged"),style=$this.data("style"),type=$this.data("type"),roomtype=$this.data("roomtype"),country=$this.data("country"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),featured=$this.data("featured"),offset=$this.data("offset"),sortby=$this.data("sortby"),author=$this.data("author"),authorid=$this.data("authorid");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_loadmore_listings",limit:limit,paged:paged,style:style,type:type,roomtype:roomtype,country:country,state:state,city:city,area:area,featured:featured,sort_by:sortby,offset:offset,author:author,authorid:authorid},beforeSend:function(){$this.find("i").css("display","inline-block")},success:function(e){"no_result"!=e?($wrap.append(e),$this.data("paged",paged+1),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing),compare_for_ajax()):$this.closest("#listings_module_section").find(".homey-loadmore").text(no_more_listings)},complete:function(){$this.find("i").css("display","none")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing);var compare_for_ajax=function(){var e=homeyGetCookie("homey_compare_listings");add_to_compare(compare_url,add_compare,remove_compare,compare_limit,e,4),remove_from_compare(e,add_compare,remove_compare)};$("#homey_complete_order").on("click",function(e){var t,s,a;if(e.preventDefault(),t=$("input[name='homey_payment_type']:checked").val(),a=$("input[name='is_upgrade']").val(),s=$("#listing_id").val(),"paypal"==t)homey_processing_modal(paypal_connecting),homey_paypal_payment(s,a);else if("stripe"==t){$(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click")}});var homey_processing_modal=function(e){var t='<div class="modal fade" id="homey_modal" tabindex="-1" role="dialog" aria-labelledby="homeyModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body homey_messages_modal">'+e+"</div></div></div></div></div>";jQuery("body").append(t),jQuery("#homey_modal").modal()},homey_processing_modal_close=function(){jQuery("#homey_modal").modal("hide")},homey_paypal_payment=function(listing_id,is_upgrade){$.ajax({type:"post",url:ajaxurl,data:{action:"homey_listing_paypal_payment",listing_id:listing_id,is_upgrade:is_upgrade},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};0<$("#add_review").length&&$("#add_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_action").val(),review_content=$("#review_content").val(),review_reservation_id=$("#review_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_review",rating:rating,review_action:review_action,review_content:review_content,review_reservation_id:review_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var listing_review_ajax=function(sortby,listing_id,paged){var review_container=$("#homey_reviews");$.ajax({type:"post",url:ajaxurl,data:{action:"homey_ajax_review",sortby:sortby,listing_id:listing_id,paged:paged},beforeSend:function(){},success:function(e){review_container.empty(),review_container.html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){}})};0<$("#sort_review").length&&$("#sort_review").on("change",function(){var e=$(this).val(),t=$("#review_listing_id").val(),s=$("#review_paged").val();listing_review_ajax(e,t,s)}),0<$("#review_next").length&&$("#review_next").on("click",function(e){e.preventDefault(),$("#review_prev").removeAttr("disabled");var t=$("#page_sort").val(),s=$("#total_pages").val(),a=$("#review_listing_id").val(),o=$("#review_paged").val();o=Number(o)+1,$("#review_paged").val(o),o==s&&$(this).attr("disabled",!0),listing_review_ajax(t,a,o)}),0<$("#review_prev").length&&$("#review_prev").on("click",function(e){e.preventDefault(),$("#review_next").removeAttr("disabled");var t=$("#page_sort").val(),s=$("#review_listing_id").val(),a=$("#review_paged").val();a=Number(a)-1,$("#review_paged").val(a),a<=1&&$(this).attr("disabled",!0),listing_review_ajax(t,s,a)});var homey_calculate_booking_cost=function(check_in_date,check_out_date,guests,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),""!==check_in_date&&""!==check_out_date?$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_booking_cost",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost").empty(),$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}}):$("#homey_booking_cost").empty()},check_booking_availability_on_date_change=function(check_in_date,check_out_date,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_date_change",check_in_date:check_in_date,check_out_date:check_out_date,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_for_reservation").removeAttr("disabled"),$("#instance_reservation").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_for_reservation").attr("disabled",!0),$("#instance_reservation").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})};$("#single-listing-date-range input").on("focus",function(){$(".single-listing-booking-calendar-js").css("display","block"),$(".single-listing-booking-calendar-js").addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(".single-listing-booking-calendar-js").removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active")}),$(".single-guests-js input").on("focus",function(){$(this).prev("label").css("display","block"),$(this).addClass("on-focus"),$(".single-form-guests-js").css("display","block")});var numClicks=0,fromTimestamp_2,toTimestamp_2=0,homey_booking_dates=function(){$(".single-listing-booking-calendar-js ul li").on("click",function(){var e=$(this);if(e.hasClass("past-day"))return!1;numClicks+=1;var t=e.data("formatted-date"),s=e.data("timestamp");if("depart"==focusedInput_2&&fromTimestamp_2<s&&($(".single-listing-calendar-wrap ul").find("li.to-day").removeClass("selected").siblings().removeClass("to-day in-between"),numClicks=2),1==numClicks)fromTimestamp_2=s,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$("#check_in_date").val(t),$("#check_out_date").val(""),homey_calculate_price_checkin();else if(2==numClicks){toTimestamp_2=s,e.addClass("to-day selected"),$(".single-listing-booking-calendar-js").removeClass("depart_active").addClass("arrive_active");var a=$("#check_in_date").val();a=homey_timeStamp_2(a),homey_timeStamp_2(t)<=a?(fromTimestamp_2=s,toTimestamp_2=0,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$("#check_in_date").val(t),numClicks=1):(setInBetween_2(fromTimestamp_2,toTimestamp_2),$("#check_out_date").val(t),$("#single-booking-search-calendar").hide(),homey_calculate_price_checkout())}2==numClicks&&(numClicks=0)})};homey_booking_dates(),$(".single-listing-calendar-wrap ul li").on("hover",function(){var e=$(this).data("timestamp");1==numClicks&&setInBetween_2(fromTimestamp_2,e)});var setInBetween_2=function(t,s){$(".single-listing-calendar-wrap ul li").removeClass("in-between").filter(function(){var e=$(this).data("timestamp");return t<e&&e<s}).addClass("in-between")},homey_calculate_price_checkin=function(){var e=$("#check_in_date").val(),t=$("#check_out_date").val(),s=$("#guests").val(),a=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_booking_cost(e,t,s,a,o)},homey_calculate_price_checkout=function(){var e=$("#check_in_date").val(),t=$("#check_out_date").val(),s=$("#guests").val(),a=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_booking_cost(e,t,s,a,o),check_booking_availability_on_date_change(e,t,a,o)};$("#apply_guests").on("click",function(){var e=$("#check_in_date").val(),t=$("#check_out_date").val(),s=$("#guests").val(),a=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_booking_cost(e,t,s,a,o),check_booking_availability_on_date_change(e,t,a,o)});var single_listing_guests=function(){$(".adult_plus").on("click",function(e){e.preventDefault();parseInt($("#guests").val());var t=parseInt($("#adult_guest").val()),s=parseInt($("#child_guest").val());t++,$(".homey_adult").text(t),$("#adult_guest").val(t);var a=t+s;"yes"!=allow_additional_guests&&a==allowed_guests_num&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)),$("#guests").val(a)}),$(".adult_minus").on("click",function(e){e.preventDefault();parseInt($("#guests").val());var t=parseInt($("#adult_guest").val()),s=parseInt($("#child_guest").val());if(0!=t){t--,$(".homey_adult").text(t),$("#adult_guest").val(t);var a=t+s;$("#guests").val(a),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}}),$(".child_plus").on("click",function(e){e.preventDefault();parseInt($("#guests").val());var t=parseInt($("#child_guest").val()),s=parseInt($("#adult_guest").val());t++,$(".homey_child").text(t),$("#child_guest").val(t);var a=t+s;"yes"!=allow_additional_guests&&a==allowed_guests_num&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)),$("#guests").val(a)}),$(".child_minus").on("click",function(e){e.preventDefault();parseInt($("#guests").val());var t=parseInt($("#child_guest").val()),s=parseInt($("#adult_guest").val());if(0!=t){t--,$(".homey_child").text(t),$("#child_guest").val(t);var a=t+s;$("#guests").val(a),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}})};single_listing_guests(),$("#request_for_reservation").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#check_in_date").val(),check_out_date=$("#check_out_date").val(),guests=$("#guests").val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_reservation",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($("#check_in_date, #check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#reserve_period_host").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#period_start_date").val(),check_out_date=$("#period_end_date").val(),listing_id=$("#period_listing_id").val(),period_note=$("#period_note").val(),security=$("#period-security").val(),notify=$(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reserve_period_host",check_in_date:check_in_date,check_out_date:check_out_date,period_note:period_note,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?(notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=calendar_link):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#instance_reservation").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#check_in_date").val(),check_out_date=$("#check_out_date").val(),guests=$("#guests").val(),listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"homey_instance_booking",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($("#check_in_date, #check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_decline_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#cancelled").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_cancelled_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="fa fa-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var homey_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),s=$("#reservation_id").val(),a=$("#checkout-security").val(),o=$("input[name='payment_gateway']:checked").val();if(null==o&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===o)homey_booking_paypal_payment(t,s,a);else if("stripe"===o){$(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html("")}});var homey_instance_booking_paypal_payment=function($this,check_in,check_out,guests,listing_id,renter_message,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_booking_paypal_payment",check_in:check_in,check_out:check_out,guests:guests,listing_id:listing_id,renter_message:renter_message,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_instance_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),s=$("#check_in_date").val(),a=$("#check_out_date").val(),o=$("#guests").val(),i=$("#listing_id").val(),r=$("#renter_message").val(),n=$("#checkout-security").val();$("#instance_noti").empty();var l=$("input[name='payment_gateway']:checked").val();if(null==l&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===l)homey_instance_booking_paypal_payment(t,s,a,o,i,r,n);else if("stripe"===l){$(this).parents("form").find(".homey_stripe_simple button").trigger("click")}}),$("button.homey-booking-step-1").on("click",function(e){e.preventDefault();var $this=$(this),first_name=$("#first-name").val(),last_name=$("#last-name").val(),phone=$("#phone").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_step_1",first_name:first_name,last_name:last_name,phone:phone},beforeSend:function(){$this.children("i").remove(),$(".homey-booking-block-body-1 .continue-block-button p.error").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".homey-booking-block-title-2").removeClass("inactive mb-0"),$(".homey-booking-block-body-2").slideDown("slow"),$(".homey-booking-block-title-1").addClass("mb-0"),$(".homey-booking-block-body-1").slideUp("slow"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").show()):$(".homey-booking-block-body-1 .continue-block-button").prepend('<p class="error text-danger"><i class="fa fa-close"></i> '+e.message+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("button.homey-booking-step-2").on("click",function(e){e.preventDefault();var t=$("input[name='agreement']:checked").val();$(".homey-booking-block-body-2 .continue-block-button p.error").remove(),null!=t?($(".homey-booking-block-title-3").removeClass("inactive mb-0"),$(".homey-booking-block-body-3").slideDown("slow"),$(".homey-booking-block-title-2").addClass("mb-0"),$(".homey-booking-block-body-2").slideUp("slow"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").show()):$(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="fa fa-close"></i> '+agree_term_text+"</p>")}),$(".homey-booking-block-title-1 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-2, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-2, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-1").removeClass("mb-0"),$(".homey-booking-block-body-1").slideDown("slow")}),$(".homey-booking-block-title-2 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-1, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-1, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-2").removeClass("mb-0"),$(".homey-booking-block-body-2").slideDown("slow")}),$(".contact_listing_host").on("click",function(e){e.preventDefault();var $this=$(this),$host_contact_wrap=$this.parents(".host-contact-wrap"),$form=$this.parents("form"),$messages=$host_contact_wrap.find(".homey_contact_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($messages.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):($messages.empty().append(e.msg),$this.children("i").removeClass(process_loader_spinner)),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$("#host_detail_contact").on("click",function(e){e.preventDefault();var current_element=$(this),$this=$(this),$form=$this.parents("form");jQuery.ajax({type:"post",url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){current_element.children("i").remove(),current_element.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){current_element.children("i").removeClass(process_loader_spinner),e.success?($("#form_messages").empty().append(e.msg),current_element.children("i").addClass(success_icon)):$("#form_messages").empty().append(e.msg),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),0<$("#homey-print").length&&$("#homey-print").on("click",function(e){var listingID,printWindow;e.preventDefault(),listingID=$(this).attr("data-listing-id"),printWindow=window.open("","Print Me","width=850 ,height=842"),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_create_print",listing_id:listingID},success:function(e){printWindow.document.write(e),printWindow.document.close(),printWindow.focus()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".homey_login_button").on("click",function(e){e.preventDefault();var t=$(this);homey_login(t)}),$(".homey-register-button").on("click",function(e){e.preventDefault();var t=$(this);homey_register(t)});var homey_login=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?($messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),window.location.reload()):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_register=function(currnt){var $form=currnt.parents("form"),$messages=$(".homey_register_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==homey_reCaptcha&&homeyReCaptchaReset(),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#homey_forgetpass").on("click",function(e){e.preventDefault();var user_login=$("#user_login_forgot").val(),security=$("#homey_resetpassword_security").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password",user_login:user_login,security:security},beforeSend:function(){$("#homey_msg_reset").empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$("#homey_msg_reset").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"):$("#homey_msg_reset").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),0<$("#homey_reset_password").length&&$("#homey_reset_password").on("click",function(e){e.preventDefault();var t=$(this),s=$('input[name="rp_login"]').val(),a=$('input[name="rp_key"]').val(),o=$('input[name="pass1"]').val(),i=$('input[name="pass2"]').val(),r=$('input[name="homey_resetpassword_security"]').val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password_2",rq_login:s,password:o,confirm_pass:i,rp_key:a,security:r},beforeSend:function(){t.children("i").remove(),t.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?(jQuery("#password_reset_msgs").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),jQuery("#oldpass, #newpass, #confirmpass").val("")):jQuery("#password_reset_msgs").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(e){},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}),$(".homey-facebook-login").on("click",function(){var e=$(this);homey_login_via_facebook(e)});var homey_login_via_facebook=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_facebook_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-yahoo-login").on("click",function(){var e=$(this);homey_login_via_yahoo(e)});var homey_login_via_yahoo=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_yahoo_login"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-google-login").on("click",function(){var e=$(this);homey_login_via_google(e)});var homey_login_via_google=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_google_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}}});